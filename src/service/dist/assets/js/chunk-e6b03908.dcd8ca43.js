(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6b03908"],{"3d1d":function(e,t,a){},"5b96":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-settings"}}),e._v("\n                    基础设置\n                ")],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("消息推送")]),a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"webhook地址:"}},[a("Input",{attrs:{placeholder:"支持钉钉/企业微信(赞助版本) webhook机器人"},model:{value:e.message.web_hook,callback:function(t){e.$set(e.message,"web_hook",t)},expression:"message.web_hook"}})],1),a("FormItem",{attrs:{label:"webhook Secret Key:"}},[a("Input",{attrs:{placeholder:"钉钉hook secret key",type:"password",password:""},model:{value:e.message.key,callback:function(t){e.$set(e.message,"key",t)},expression:"message.key"}})],1),a("FormItem",{attrs:{label:"邮件SMTP服务地址:"}},[a("Input",{attrs:{placeholder:"STMP服务 地址"},model:{value:e.message.host,callback:function(t){e.$set(e.message,"host",t)},expression:"message.host"}})],1),a("FormItem",[a("Checkbox",{model:{value:e.message.ssl,callback:function(t){e.$set(e.message,"ssl",t)},expression:"message.ssl"}},[e._v("启用ssl端口")])],1),a("FormItem",{attrs:{label:"SMTP服务端口:"}},[a("InputNumber",{model:{value:e.message.port,callback:function(t){e.$set(e.message,"port",t)},expression:"message.port"}})],1),a("FormItem",{attrs:{label:"邮件推送人用户名:"}},[a("Input",{attrs:{placeholder:"推送人 用户名"},model:{value:e.message.user,callback:function(t){e.$set(e.message,"user",t)},expression:"message.user"}})],1),a("FormItem",{attrs:{label:"邮件推送人密码:"}},[a("Input",{attrs:{placeholder:"推送人 密码",type:"password"},model:{value:e.message.password,callback:function(t){e.$set(e.message,"password",t)},expression:"message.password"}})],1),a("FormItem",{attrs:{label:"邮件测试收件地址::"}},[a("Input",{attrs:{placeholder:"测试收件人地址填写"},model:{value:e.message.to_user,callback:function(t){e.$set(e.message,"to_user",t)},expression:"message.to_user"}})],1),a("Form-item",{attrs:{label:"email推送开关:"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.message.mail,callback:function(t){e.$set(e.message,"mail",t)},expression:"message.mail"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("Form-item",{attrs:{label:"webhook推送开关:"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.message.ding,callback:function(t){e.$set(e.message,"ding",t)},expression:"message.ding"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.message_test("ding")}}},[e._v("hook测试")]),a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning"},on:{click:function(t){return e.message_test("mail")}}},[e._v("邮件测试\n                                ")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Card",{staticStyle:{"margin-left":"5%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("LDAP设置")]),a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"服务地址url"}},[a("Input",{attrs:{placeholder:"[ip地址或者域名]:[端口号]"},model:{value:e.ldap.url,callback:function(t){e.$set(e.ldap,"url",t)},expression:"ldap.url"}})],1),a("FormItem",[a("Checkbox",{model:{value:e.ldap.ldaps,callback:function(t){e.$set(e.ldap,"ldaps",t)},expression:"ldap.ldaps"}},[e._v("启用ldaps")])],1),a("FormItem",{attrs:{label:"LDAP管理员DN:"}},[a("Input",{attrs:{placeholder:"请填写管理员DN"},model:{value:e.ldap.user,callback:function(t){e.$set(e.ldap,"user",t)},expression:"ldap.user"}})],1),a("FormItem",{attrs:{label:"LDAP管理员密码:"}},[a("Input",{attrs:{placeholder:"请填写管理员密码",type:"password"},model:{value:e.ldap.password,callback:function(t){e.$set(e.ldap,"password",t)},expression:"ldap.password"}})],1),a("FormItem",{attrs:{label:"LDAP_Search filter:"}},[a("Select",{model:{value:e.ldap.type,callback:function(t){e.$set(e.ldap,"type",t)},expression:"ldap.type"}},[a("Option",{attrs:{value:1}},[e._v("sAMAccountName")]),a("Option",{attrs:{value:2}},[e._v("uid")]),a("Option",{attrs:{value:3}},[e._v("cn")])],1)],1),a("FormItem",{attrs:{label:"LDAP_SCBASE:"}},[a("Input",{attrs:{placeholder:"LDAP Search Base"},model:{value:e.ldap.sc,callback:function(t){e.$set(e.ldap,"sc",t)},expression:"ldap.sc"}})],1),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.ldap_test()}}},[e._v("ldap测试")])],1)],1),a("br"),a("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"info","show-icon":""}},[e._v("\n                            注意事项：\n                            "),a("template",{slot:"desc"},[e._v("\n                                1.LDAP登录用户名，必须全局唯一。ldap配置请参考Grafana。\n                                "),a("br"),e._v("\n                                2.由于各个邮件服务提供商对于垃圾邮件过滤的机制各不相同，可能会造成邮件无法接收的情况。所以使用前请测试是否稳定。对于使用了ssl安全协议的stmp连接需勾选启动ssl端口复选框\n                                "),a("br"),e._v("\n                                3.只有开启相应的消息推送开关后，消息推送才会开启。\n                                "),a("br")])],2)],1)],1)],1)],1)],1),a("br"),a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"android-settings"}}),e._v("\n                    进阶设置\n                ")],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Card",{staticStyle:{"margin-left":"5%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("其他")]),a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"查询最大Limit限制:"}},[a("Input",{attrs:{placeholder:"查询最大的Limit数。"},model:{value:e.other.limit,callback:function(t){e.$set(e.other,"limit",t)},expression:"other.limit"}})],1),a("FormItem",{attrs:{label:"自定义环境:"}},[e._l(e.other.idc,(function(t){return a("Tag",{key:t,attrs:{name:t,type:"border",closable:"",color:"blue"},on:{"on-close":e.handleClose2}},[e._v(e._s(t)+"\n                                    ")])})),a("br"),a("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"环境名称"},model:{value:e.other.foce,callback:function(t){e.$set(e.other,"foce",t)},expression:"other.foce"}}),a("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:e.handleAdd}},[e._v("\n                                        添加环境\n                                    ")])],2),a("FormItem",{attrs:{label:"排除数据库:"}},[e._l(e.other.exclude_db_list,(function(t){return a("Tag",{key:t,attrs:{name:t,type:"border",closable:"",color:"blue"},on:{"on-close":e.handleClose_exclued_db}},[e._v(e._s(t)+"\n                                    ")])})),a("br"),a("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"排除数据库"},model:{value:e.other.exclued_db,callback:function(t){e.$set(e.other,"exclued_db",t)},expression:"other.exclued_db"}}),a("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:e.handleAdd_exclued_db}},[e._v("添加排除数据库\n                                    ")])],2),a("FormItem",{attrs:{label:"脱敏字段:"}},[e._l(e.other.insulate_word_list,(function(t){return a("Tag",{key:t,attrs:{name:t,type:"border",closable:"",color:"blue"},on:{"on-close":e.handleClose3}},[e._v(e._s(t)+"\n                                    ")])})),a("br"),a("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"脱敏字段设置"},model:{value:e.other.sensitive,callback:function(t){e.$set(e.other,"sensitive",t)},expression:"other.sensitive"}}),a("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:e.handleAdd1}},[e._v("\n                                        添加脱敏字段\n                                    ")])],2),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"查询审核:"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.other.query,callback:function(t){e.$set(e.other,"query",t)},expression:"other.query"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1)],1),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"允许注册:"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.other.register,callback:function(t){e.$set(e.other,"register",t)},expression:"other.register"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"查询导出:"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.other.export,callback:function(t){e.$set(e.other,"export",t)},expression:"other.export"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1)],1),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"查询时限:"}},[a("InputNumber",{attrs:{max:600,min:0,formatter:function(e){return e+"分钟"}},model:{value:e.other.ex_query_time,callback:function(t){e.$set(e.other,"ex_query_time",t)},expression:"other.ex_query_time"}})],1)],1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Card",{staticStyle:{"margin-left":"5%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("超级管理员特权")]),a("Form",{attrs:{"label-width":160}},[a("FormItem",{attrs:{label:"删除指定日期前的工单记录"}},[a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",editable:!1},on:{"on-change":function(t){e.other.overdue=t}},model:{value:e.other.overdue,callback:function(t){e.$set(e.other,"overdue",t)},expression:"other.overdue"}}),a("Poptip",{attrs:{confirm:"",title:"确定要删除工单记录吗?"},on:{"on-ok":e.del_order}},[a("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[e._v("删除")])],1)],1),a("FormItem",{attrs:{label:"删除指定日期前的查询记录"}},[a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",editable:!1},on:{"on-change":function(t){e.other.query_expire=t}},model:{value:e.other.query_expire,callback:function(t){e.$set(e.other,"query_expire",t)},expression:"other.query_expire"}}),a("Poptip",{attrs:{confirm:"",title:"确定要删除查询记录吗?"},on:{"on-ok":e.del_query}},[a("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[e._v("删除")])],1)],1)],1)],1)],1),a("br"),a("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning","show-icon":""}},[e._v("\n                            注意事项：\n                            "),a("template",{slot:"desc"},[e._v("\n                                1.设置最大Limit数后，所有的查询语句的查询结果都不会超过这个数值。\n                                "),a("br"),e._v("\n                                2.查询审核开关开启后，所有的查询都必须通过管理员同意才能进行。关闭则可自主查询\n                                "),a("br"),e._v("\n                                3.设置脱敏字段后，查询时如匹配到对应字段则该字段将只会以******显示\n                            ")])],2),a("Button",{staticStyle:{"margin-left":"5%",width:"95%"},attrs:{type:"primary"},on:{click:e.save_upload}},[e._v("保存")])],1)],1)],1)],1)],1)],1)},r=[],l=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("2397"),a("d225")),o=a("b0b4"),n=a("4e2b"),i=a("308d"),c=a("6bb5"),u=a("9ab4"),d=a("60a3"),p=a("028f"),m=a("3c11"),h=a("3e4a"),f={basic:"".concat(m["a"].url,"/manage/setting")};function b(e){return Object(h["a"])({method:"post",data:e,url:f.basic})}function v(){return Object(h["a"])({method:"get",url:f.basic})}function y(e,t){return Object(h["a"])({method:"put",url:f.basic,data:{mail:t},params:{test:e}})}function _(e){return Object(h["a"])({method:"put",url:f.basic,data:{ldap:e},params:{test:"ldap"}})}function g(e){return Object(h["a"])({method:"delete",url:f.basic,params:e})}function k(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=x(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){n=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(n)throw l}}}}function x(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}function I(e){var t=$();return function(){var a,s=Object(c["a"])(e);if(t){var r=Object(c["a"])(this).constructor;a=Reflect.construct(s,arguments,r)}else a=s.apply(this,arguments);return Object(i["a"])(this,a)}}function $(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var F=function(e){Object(n["a"])(a,e);var t=I(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.ldap={},e.message={push_type:!1},e.other={limit:0,per_order:0},e}return Object(o["a"])(a,[{key:"del_order",value:function(){g({date:this.other.overdue,tp:!1})}},{key:"del_query",value:function(){g({date:this.other.query_expire,tp:!0})}},{key:"handleAdd",value:function(){var e,t=k(this.other.idc);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a===this.other.foce)return void this.$Message.error("请勿添加相同环境！")}}catch(s){t.e(s)}finally{t.f()}this.other.idc.push(this.other.foce),this.other.foce=""}},{key:"handleAdd1",value:function(){var e,t=k(this.other.insulate_word_list);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a===this.other.sensitive)return void this.$Message.error("请勿添加相同脱敏字段！")}}catch(s){t.e(s)}finally{t.f()}this.other.insulate_word_list.push(this.other.sensitive),this.other.sensitive=""}},{key:"handleAdd_exclued_db",value:function(){var e,t=k(this.other.exclude_db_list);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a===this.other.exclued_db)return void this.$Message.error("请勿添加相同数据库！")}}catch(s){t.e(s)}finally{t.f()}this.other.exclude_db_list.push(this.other.exclued_db),this.other.exclued_db=""}},{key:"handleClose2",value:function(e,t){var a=this.other.idc.indexOf(t);this.other.idc.splice(a,1)}},{key:"handleClose3",value:function(e,t){var a=this.other.insulate_word_list.indexOf(t);this.other.insulate_word_list.splice(a,1)}},{key:"handleClose_exclued_db",value:function(e,t){var a=this.other.exclude_db_list.indexOf(t);this.other.exclude_db_list.splice(a,1)}},{key:"ldap_test",value:function(){_(this.ldap)}},{key:"message_test",value:function(e){y(e,this.message)}},{key:"save_upload",value:function(){b({ldap:this.ldap,message:this.message,other:this.other})}},{key:"mounted",value:function(){var e=this;v().then((function(t){e.message=t.data.payload.Message,e.other=t.data.payload.Other,e.ldap=t.data.payload.Ldap}))}}]),a}(Object(d["b"])(p["a"]));F=Object(u["b"])([d["a"]],F);var C=F,S=C,A=(a("61e1"),a("2877")),O=Object(A["a"])(S,s,r,!1,null,null,null);t["default"]=O.exports},"61e1":function(e,t,a){"use strict";a("3d1d")}}]);