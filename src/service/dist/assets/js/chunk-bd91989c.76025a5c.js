(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bd91989c"],{"44e1":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Form",{ref:"queryForm",attrs:{inline:"",model:t.find}},[r("FormItem",{attrs:{prop:"text"}},[r("Input",{attrs:{placeholder:t.text},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.queryData.apply(null,arguments)}},model:{value:t.find.text,callback:function(e){t.$set(t.find,"text",e)},expression:"find.text"}})],1),t.is_group?t._e():r("FormItem",{attrs:{prop:"picker"}},[r("DatePicker",{staticStyle:{width:"250px"},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetimerange",placeholder:"请选择查询的时间范围",editable:!1},on:{"on-change":function(e){t.find.picker=e}},model:{value:t.find.picker,callback:function(e){t.$set(t.find,"picker",e)},expression:"find.picker"}})],1),r("FormItem",[r("Button",{attrs:{type:"success"},on:{click:t.queryData}},[t._v("查询")])],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:t.queryCancel}},[t._v("重置")])],1)],1)},a=[],o=(r("2397"),r("7514"),r("d225")),c=r("b0b4"),i=r("4e2b"),s=r("308d"),l=r("6bb5"),u=r("9ab4"),f=r("60a3"),p=r("028f"),d=r("7f08");function y(t){var e=b();return function(){var r,n=Object(l["a"])(t);if(e){var a=Object(l["a"])(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s["a"])(this,r)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var h=function(t){Object(i["a"])(r,t);var e=y(r);function r(){return Object(o["a"])(this,r),e.apply(this,arguments)}return Object(c["a"])(r,[{key:"queryData",value:function(){this.find.valve=!0,d["a"].post_search_args(this.find),this.$emit("refresh")}},{key:"queryCancel",value:function(){this.find.valve=!1,this.resetFields("queryForm"),this.find.type=2,d["a"].post_search_args(this.find),this.current=1,this.$emit("refresh")}},{key:"beforeDestroy",value:function(){this.resetFields("queryForm")}}]),r}(Object(f["b"])(p["a"]));Object(u["b"])([Object(f["c"])({type:Boolean,required:!1,default:!1})],h.prototype,"is_group",void 0),Object(u["b"])([Object(f["c"])({type:String,required:!0,default:""})],h.prototype,"text",void 0),h=Object(u["b"])([Object(f["a"])({components:{}})],h);var v=h,k=v,_=r("2877"),m=Object(_["a"])(k,n,a,!1,null,"e9115d1a",null);e["a"]=m.exports},"5dba":function(t,e,r){},"6ec7":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("RadioGroup",{attrs:{type:"button","button-style":"solid"},on:{"on-change":t.searchChange},model:{value:t.find.status,callback:function(e){t.$set(t.find,"status",e)},expression:"find.status"}},[t.is_record?t._e():[t.is_order?t._l(t.order_state,(function(e){return r("Radio",{key:e.key,attrs:{label:e.key}},[t._v(t._s(e.title))])})):t._l(t.query_state,(function(e){return r("Radio",{key:e.key,attrs:{label:e.key}},[t._v(t._s(e.title))])}))]],2),r("DatePicker",{staticStyle:{width:"auto","margin-left":"1%"},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetimerange",placeholder:"请选择查询的时间范围",editable:!1},on:{"on-change":t.searchChange},model:{value:t.find.picker,callback:function(e){t.$set(t.find,"picker",e)},expression:"find.picker"}}),r("Input",{staticStyle:{width:"200px","margin-left":"1%"},attrs:{suffix:"ios-search",placeholder:t.text,clearable:""},on:{"on-enter":t.searchChange,"on-clear":t.searchChange},model:{value:t.find.text,callback:function(e){t.$set(t.find,"text",e)},expression:"find.text"}})],1)},a=[],o=(r("2397"),r("7514"),r("d225")),c=r("b0b4"),i=r("4e2b"),s=r("308d"),l=r("6bb5"),u=r("9ab4"),f=r("60a3"),p=r("028f"),d=r("7f08");function y(t){var e=b();return function(){var r,n=Object(l["a"])(t);if(e){var a=Object(l["a"])(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s["a"])(this,r)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var h=function(t){Object(i["a"])(r,t);var e=y(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.order_state=[{title:"全部",key:7},{title:"审核中",key:2},{title:"已执行",key:1},{title:"执行失败",key:4},{title:"驳回",key:0}],t.query_state=[{title:"全部",key:7},{title:"待审核",key:2},{title:"同意/查询",key:1},{title:"驳回",key:0},{title:"查询结束",key:3}],t}return Object(c["a"])(r,[{key:"searchChange",value:function(){d["a"].post_search_args(this.find),this.$emit("search")}}]),r}(Object(f["b"])(p["a"]));Object(u["b"])([Object(f["c"])({type:Boolean,required:!1,default:!0})],h.prototype,"is_order",void 0),Object(u["b"])([Object(f["c"])({type:Boolean,required:!1,default:!1})],h.prototype,"is_record",void 0),Object(u["b"])([Object(f["c"])({type:String,required:!1,default:"输入工单说明，回车搜索"})],h.prototype,"text",void 0),h=Object(u["b"])([Object(f["a"])({components:{}})],h);var v=h,k=v,_=r("2877"),m=Object(_["a"])(k,n,a,!1,null,"42abd2b0",null);e["a"]=m.exports},"7c19":function(t,e,r){"use strict";r("5dba")},8123:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",[r("template",{slot:"title"},[r("Row",{attrs:{type:"flex",justify:"end"}},[r("Col",{attrs:{span:"2"}},[r("p",[r("Icon",{attrs:{type:"md-create"}}),t._v("\n                        工单审核\n                    ")],1)]),r("Col",{attrs:{span:"8"}},[r("Poptip",{attrs:{trigger:"hover",title:"提示",content:"此开关用于打开实时表格数据更新功能"}},[r("i-switch",{attrs:{size:"large"},on:{"on-change":t.refreshForm},model:{value:t.valve,callback:function(e){t.valve=e},expression:"valve"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("打开")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),r("Col",{attrs:{span:"14"}},[r("nav-search",{on:{search:t.search}})],1)],1)],1),r("Table",{attrs:{border:"",columns:t.columns,data:t.table_data,stripe:"",size:"small"},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[5!==n.status?[r("Button",{attrs:{type:"success",size:"small",ghost:""},on:{click:function(e){return t.orderDetail(n)}}},[t._v("\n                        详情\n                    ")]),r("Poptip",{attrs:{confirm:"",title:"确定要中止该工单吗？",transfer:""},on:{"on-ok":function(e){return t.delayKill(n)}}},[3===n.status&&"none"!==n.delay?r("Button",{staticClass:"margin-left-10",attrs:{type:"error",size:"small",ghost:""}},[t._v("\n                            延时工单中止\n                        ")]):t._e()],1),3===n.status&&0===n.type?r("Button",{staticClass:"margin-left-10",attrs:{ghost:"",size:"small",type:"warning"},on:{click:function(e){return t.timerOsc(n)}}},[t._v("osc进度\n                    ")]):t._e()]:t._e()]}},{key:"delay",fn:function(e){var n=e.row;return["none"!==n.delay?r("span",[t._v(t._s(n.delay))]):r("span",[t._v("无")])]}}])}),r("br"),r("Page",{attrs:{total:t.page_number,"show-elevator":"","page-size":15,current:t.current},on:{"on-change":t.current_page,"update:current":function(e){t.current=e}}})],2),r("osc",{model:{value:t.is_osc,callback:function(e){t.is_osc=e},expression:"is_osc"}})],1)},a=[],o=(r("2397"),r("d225")),c=r("b0b4"),i=r("4e2b"),s=r("308d"),l=r("6bb5"),u=r("9ab4"),f=r("60a3"),p=r("44e1"),d=r("119b"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{title:"OSC进度展示",closable:!1,"ok-text":"osc终止"},on:{"on-cancel":t.oscClose,"on-ok":t.oscKill},model:{value:t.is_open,callback:function(e){t.is_open=e},expression:"is_open"}},[r("Col",{attrs:{offset:"6"}},[r("i-circle",{attrs:{size:250,"trail-width":4,"stroke-width":5,percent:t.osc.percent,"stroke-linecap":"square","stroke-color":"#43a3fb"}},[r("div",{staticClass:"demo-Circle-custom"},[r("h1",[t._v(t._s(t.osc.percent)+"%")]),r("span",[t._v("\n            当前正在执行第\n            "),r("i",[t._v(t._s(t.osc.current))]),t._v("\n          条\n        ")])])])],1)],1)},b=[],h=r("028f"),v=r("6148"),k=r("3e4a");function _(t){var e=m();return function(){var r,n=Object(l["a"])(t);if(e){var a=Object(l["a"])(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s["a"])(this,r)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var O=function(t){Object(i["a"])(r,t);var e=_(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.osc={percent:0,current:0},t.ws=0,t}return Object(c["a"])(r,[{key:"get_visible",value:function(t){t&&(this.openOSC(),this.interval()),this.is_open=t}},{key:"work_id",get:function(){return v["a"].osc_id}},{key:"oscClose",value:function(){clearInterval(this.ws),this.$emit("input",!1)}},{key:"oscKill",value:function(){var t=this;k["a"].delete("".concat(this.$config.url,"/audit/osc/").concat(this.work_id)).finally((function(){return t.oscClose()}))}},{key:"openOSC",value:function(){var t=this;k["a"].get("".concat(this.$config.url,"/audit/osc/").concat(this.work_id)).then((function(e){t.osc.percent=e.data.payload.p,t.osc.current=e.data.payload.s}))}},{key:"interval",value:function(){var t=this;this.ws=setInterval((function(){t.openOSC()}),3e3)}}]),r}(Object(f["b"])(h["a"]));Object(u["b"])([Object(f["c"])({type:Boolean,required:!0,default:!1})],O.prototype,"value",void 0),Object(u["b"])([Object(f["e"])("value")],O.prototype,"get_visible",null),O=Object(u["b"])([Object(f["a"])({components:{}})],O);var j=O,g=j,x=r("2877"),w=Object(x["a"])(g,y,b,!1,null,"196dce56",null),C=w.exports,R=r("476e"),q=r("6d8f"),B=r("9a29"),$=r("a334"),F=r("6ec7");function I(t){var e=S();return function(){var r,n=Object(l["a"])(t);if(e){var a=Object(l["a"])(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s["a"])(this,r)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var P=function(t){Object(i["a"])(r,t);var e=I(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.columns=[{title:"工单编号:",key:"work_id",sortable:!0,sortType:"desc",width:155},{title:"工单说明:",key:"text",tooltip:!0},{title:"工单类型",key:"type",render:q["a"].type},{title:"提交时间:",key:"date",sortable:!0},{title:"提交账号",key:"username",sortable:!0},{title:"真实姓名",key:"real_name",sortable:!0},{title:"定时执行",key:"delay",slot:"delay"},{title:"当前操作人",key:"assigned",sortable:!0},{title:"状态",key:"status",width:150,render:q["a"].tag,sortable:!0},{title:"操作",key:"action",width:200,align:"center",slot:"action"}],t.reboot=0,t.valve=!0,t.is_osc=!1,t.url="".concat(t.$config.url,"/audit/order/list"),t}return Object(c["a"])(r,[{key:"search",value:function(){this.current=1,this.current_page()}},{key:"delayKill",value:function(t){var e=this;Object(B["b"])({work_id:t.work_id}).then((function(){e.current_page()}))}},{key:"timerOsc",value:function(t){this.is_osc=!0,v["a"].fetch_order_osc_id(t.work_id)}},{key:"orderDetail",value:function(t){$["a"].fetch_order_item(t),this.$router.push({name:"profile",query:{isAdmin:JSON.stringify(!0)}})}},{key:"refreshForm",value:function(t){if(t){var e=this;this.reboot=setInterval((function(){e.current_page(e.current)}),5e3)}else clearInterval(this.reboot)}},{key:"mounted",value:function(){this.current_page(),this.refreshForm(this.valve)}},{key:"destroyed",value:function(){clearInterval(this.reboot)}}]),r}(Object(f["b"])(h["a"]));P=Object(u["b"])([Object(f["a"])({components:{search:p["a"],profile:d["a"],osc:C,reject:R["a"],NavSearch:F["a"]}})],P);var D=P,z=D,E=(r("7c19"),Object(x["a"])(z,n,a,!1,null,"1c0ad5a0",null));e["default"]=E.exports}}]);